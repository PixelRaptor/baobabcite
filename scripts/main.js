"use strict";!function(e){"undefined"==typeof console&&(console={}),void 0===console.log&&(console.log=function(){});var o=o||{};e(document).ready(function(e){o.init()}),o.init=function(){o.toggleMenu(),o.stickyNav(),o.scrollDown(),o.validateForms(),o.sendContactForm(),o.subscribeForm(),e(".navicon").click(function(){e(this).toggleClass("open")}),iNoBounce.disable()},o.toggleMenu=function(){var o=e("#overlay"),n=e("header");e(".navicon").click(function(){e(".menu, .navicon").toggleClass("opened"),e(".menu").hasClass("opened")?(o.show(),e("html, body").css({overflow:"hidden",height:"100%",width:"100%"}),n.addClass("menu-opened"),iNoBounce.enable()):(o.hide(),e("html, body").css({overflow:"auto",height:"auto",width:"auto"}),n.removeClass("menu-opened"),iNoBounce.disable())})},o.stickyNav=function(){var o=e("header");e(window).scroll(function(){e(this).scrollTop()>1?(o.addClass("sticky"),e("body").addClass("sticky")):(o.removeClass("sticky"),e("body").removeClass("sticky"))})},o.scrollDown=function(){e("a").on("click",function(o){if(/#/.test(this.href)){var n=this.hash,t=e(n);if(t.length){o.preventDefault();var i=t.offset().top-100;e(this).closest(".menu").hasClass("opened")&&(e("#overlay").hide(),e("header").removeClass("menu-opened"),e(".menu").removeClass("opened"),e(".navicon").removeClass("open"),e("html, body").css({overflow:"auto",height:"auto",width:"auto"})),e("html, body").stop().animate({scrollTop:i},750)}iNoBounce.disable()}})},o.validateForms=function(){e.fn.validate&&(e("#contact-form").validate({ignore:".ignore",rules:{name:{required:!0},msg:{required:!0}}}),e("#subscribe").validate({rules:{phone:{required:!0}}}))},o.sendContactForm=function(){var o=e("#contact-form");o.on("submit",function(n){o.valid()&&(n&&n.preventDefault(),e.ajax({type:o.attr("method"),url:o.attr("action"),data:o.serialize(),error:function(e){o.find(".result-msg").html("Sorry, somehing went wrong.")},success:function(e){o.find(".result-msg").fadeIn()}}))})},o.subscribeForm=function(){var o=e("#subscribe");o.on("submit",function(n){o.valid()&&(n&&n.preventDefault(),e.ajax({type:o.attr("method"),url:o.attr("action"),data:o.serialize(),error:function(e){o.find(".result-msg").html("Sorry, somehing went wrong.")},success:function(e){o.find(".result-msg").fadeIn()}}))})},o.subscribePhone=function(){e.ajax({url:"https://coach.baobabcircle.com/hoodie/coach/authtoken",type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify({recipient:"00254"+e("#phone").val()}),complete:function(){},error:function(){}})},o.subscribePhoneValidate=function(){var o=e("#phone").val();return/^((\+[1-9]{1,4}[ \-]*)|(\([0-9]{2,3}\)[ \-]*)|([0-9]{2,4})[ \-]*)*?[0-9]{3,4}?[ \-]*[0-9]{3,4}?$/.test(o)&&"712345678"!=o&&o.length>8?(e("#phone").css("color","#999"),!0):(e("#phone").css("color","#cc0000"),!1)},e(document).ready(function(){e(".phonePopup").on("click",function(o){o.preventDefault(),e.colorbox({href:"#phonePopup",width:"100%",height:620,inline:!0,maxWidth:800,opacity:.7,escKey:!0,overlayClose:!0,closeButton:!0})}),e("#phone").on("focus",function(){"712345678"==e(this).val()&&e(this).val("")}),e("#phone").on("blur",function(){o.subscribePhoneValidate()}),e("#phone").on("keyup",function(o){var n=e("#phone").val();if(/^((\+[1-9]{1,4}[ \-]*)|(\([0-9]{2,3}\)[ \-]*)|([0-9]{2,4})[ \-]*)*?[0-9]{3,4}?[ \-]*[0-9]{3,4}?$/.test(n)&&"712345678"!=n&&n.length>8)return e("#phone").css("color","#999"),!0}),e("#phoneSignup").on("click",function(n){n.preventDefault(),o.subscribePhoneValidate()&&(o.subscribePhone(),e("#contact-sms-form").html("<h2>Thank you!</h2>"),e(this).hide(),e(".terms").hide())})})}(jQuery);